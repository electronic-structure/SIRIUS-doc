<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIRIUS: Coding style</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SIRIUS
   &#160;<span id="projectnumber">5.05</span>
   </div>
   <div id="projectbrief">Electronic structure library and applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Coding style </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Below are some basic style rules that we follow:</p><ul>
<li>Page width is approximately 120 characters. Screens are wide nowdays and 80 characters is an obsolete restriction. Going slightly over 120 characters is allowed if it is requird for the line continuity.</li>
<li>Identation: 4 spaces (no tabs)</li>
<li>Coments are inserted before the code with slash-star style starting with the lower case: <div class="fragment"><div class="line"><span class="comment">/* call a very important function */</span></div><div class="line">do_something();</div></div><!-- fragment --></li>
<li>Spaces between most operators: <div class="fragment"><div class="line"><span class="keywordflow">if</span> (i &lt; 5) {</div><div class="line">    j = 5;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 3; k++)</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> lm = l * l + l + m;</div><div class="line"></div><div class="line"><span class="keywordtype">double</span> d = std::abs(e);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> k = idx[3];</div></div><!-- fragment --></li>
<li>Spaces between function arguments: <div class="fragment"><div class="line"><span class="keywordtype">double</span> d = some_func(a, b, c);</div></div><!-- fragment --> but not <div class="fragment"><div class="line"><span class="keywordtype">double</span> d=some_func(a,b,c);</div></div><!-- fragment --> or <div class="fragment"><div class="line"><span class="keywordtype">double</span> d = some_func( a, b, c );</div></div><!-- fragment --></li>
<li>Spaces between template arguments, but not between &lt;&gt; brackets: <div class="fragment"><div class="line">std::vector&lt;std::array&lt;int, 2&gt;&gt; vec;</div></div><!-- fragment --> but not <div class="fragment"><div class="line">std::vector&lt; std::array&lt; int, 2 &gt; &gt; vec;</div></div><!-- fragment --></li>
<li>Curly braces for classes and functions start form the new line: <div class="fragment"><div class="line"><span class="keyword">class </span>A</div><div class="line">{</div><div class="line">    ....</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">inline</span> <span class="keywordtype">int</span> num_points()</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> num_points_;</div><div class="line">}</div></div><!-- fragment --></li>
<li>Curly braces for if-statements, for-loops, switch-case statements, etc. start at the end of the line: <div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i: {0, 1, 2}) {</div><div class="line">    some_func(i);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (a == 0) {</div><div class="line">    printf(<span class="stringliteral">&quot;a is zero&quot;</span>);</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    printf(<span class="stringliteral">&quot;a is not zero&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">switch</span> (i) {</div><div class="line">    <span class="keywordflow">case</span> 1: {</div><div class="line">        do_something();</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">case</span> 2: {</div><div class="line">        do_something_else();</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></li>
<li>Even single line 'if' statements and 'for' loops must have the curly brackes: <div class="fragment"><div class="line"><span class="keywordflow">if</span> (i == 4) {</div><div class="line">    some_variable = 5;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 10; k++) {</div><div class="line">    do_something(k);</div><div class="line">}</div></div><!-- fragment --></li>
<li>Reference and pointer symbols are part of type: <div class="fragment"><div class="line">std::vector&lt;double&gt;&amp; vec = make_vector();</div><div class="line"></div><div class="line"><span class="keywordtype">double</span>* ptr = &amp;vec[0];</div><div class="line"></div><div class="line"><span class="keyword">auto</span>&amp; atom = unit_cell().atom(ia);</div></div><!-- fragment --></li>
<li>Const modifier follows the type declaration: <div class="fragment"><div class="line">std::vector&lt;int&gt; <span class="keyword">const</span>&amp; idx()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keywordflow">return</span> idx_;</div><div class="line">}</div></div><!-- fragment --></li>
<li>Names of class members end with underscore: <div class="fragment"><div class="line"><span class="keyword">class </span>A</div><div class="line">{</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keywordtype">int</span> lmax_;</div><div class="line">};</div></div><!-- fragment --></li>
<li>Setter method starts from set_, getter method is a variable name itself: <div class="fragment"><div class="line"><span class="keyword">class </span>A</div><div class="line">{</div><div class="line">    <span class="keyword">private</span>:</div><div class="line">        <span class="keywordtype">int</span> lmax_;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keywordtype">int</span> lmax()<span class="keyword"> const</span></div><div class="line"><span class="keyword">        </span>{</div><div class="line">            <span class="keywordflow">return</span> lmax_;</div><div class="line">        }</div><div class="line">        <span class="keywordtype">void</span> set_lmax(<span class="keywordtype">int</span> lmax__)</div><div class="line">        {</div><div class="line">            lmax_ = lmax__;</div><div class="line">        }</div><div class="line">};</div></div><!-- fragment --></li>
<li>Single-line functions should not be flattened: <div class="fragment"><div class="line"><span class="keyword">struct </span>A</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> lmax()<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> lmax_;</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --> but not <div class="fragment"><div class="line"><span class="keyword">struct </span>A</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> lmax()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> lmax_; }</div><div class="line">};</div></div><!-- fragment --></li>
<li>Header guards have a standard name: double underscore + file name in capital letters + double underscore <div class="fragment"><div class="line"><span class="preprocessor">#ifndef __SIRIUS_INTERNAL_H__</span></div><div class="line"><span class="preprocessor">#define __SIRIUS_INTERNAL_H__</span></div><div class="line">...</div><div class="line">#endif <span class="comment">// __SIRIUS_INTERNAL_H__</span></div></div><!-- fragment --> We use clang-format utility to enforce the basic formatting style. Please have a look at .clang-format config file in the source root folder for the definitions.</li>
</ul>
<p>Class naming convention.</p>
<p>Problem: all 'standard' naming conventions are not satisfactory. For example, we have a class which does a DFT ground state. Following the common naming conventions it could be named like this: DFTGroundState, DftGroundState, dft_ground_state. Last two are bad, because DFT (and not Dft or dft) is a well recognized abbreviation. First one is band because capital G adds to DFT and we automaticaly read DFTG round state.</p>
<p>Solution: we can propose the following: DFTgroundState or DFT_ground_state. The first variant still doens't look very good because one of the words is captalized (State) and one (ground) - is not. So we pick the second variant: DFT_ground_state (by the way, this is close to the Bjarne Stroustrup's naiming convention, where he uses first capital letter and underscores, for example class Io_obj).</p>
<p>Some other examples:</p><ul>
<li>class Ground_state (composed of two words)</li>
<li>class FFT_interface (composed of an abbreviation and a word)</li>
<li>class Interface_XC (composed of a word and abbreviation)</li>
<li>class Spline (single word)</li>
</ul>
<p>Exceptions are allowed if it makes sense. For example, low level utility classes like 'mdarray' (multi-dimentional array) or 'pstdout' (parallel standard output) are named with small letters. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 15 2018 10:55:32 for SIRIUS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
