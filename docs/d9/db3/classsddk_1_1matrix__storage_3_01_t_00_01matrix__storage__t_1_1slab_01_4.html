<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIRIUS: sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SIRIUS
   &#160;<span id="projectnumber">6.1.4</span>
   </div>
   <div id="projectbrief">Electronic structure library and applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d4d/namespacesddk.html">sddk</a></li><li class="navelem"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html">matrix_storage&lt; T, matrix_storage_t::slab &gt;</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../de/d03/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Specialization of matrix storage class for slab data distribution.  
 <a href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d6/df8/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af4bfe9b2406a15753feaa988bcdd25c3"><td class="memItemLeft" align="right" valign="top"><a id="af4bfe9b2406a15753feaa988bcdd25c3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#af4bfe9b2406a15753feaa988bcdd25c3">matrix_storage</a> (<a class="el" href="../../d7/def/classsddk_1_1_gvec__partition.html">Gvec_partition</a> const &amp;gvp__, int num_cols__)</td></tr>
<tr class="memdesc:af4bfe9b2406a15753feaa988bcdd25c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:af4bfe9b2406a15753feaa988bcdd25c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde496811f54ab4ee5a1e89fcac24fd1"><td class="memItemLeft" align="right" valign="top"><a id="abde496811f54ab4ee5a1e89fcac24fd1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>matrix_storage</b> (int num_rows_loc__, int num_cols__)</td></tr>
<tr class="separator:abde496811f54ab4ee5a1e89fcac24fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e0b04c65d86e55ae4d263bbe40c10f1"><td class="memItemLeft" align="right" valign="top"><a id="a2e0b04c65d86e55ae4d263bbe40c10f1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a2e0b04c65d86e55ae4d263bbe40c10f1">matrix_storage</a> (<a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> &amp;mp__, <a class="el" href="../../d7/def/classsddk_1_1_gvec__partition.html">Gvec_partition</a> const &amp;gvp__, int num_cols__)</td></tr>
<tr class="memdesc:a2e0b04c65d86e55ae4d263bbe40c10f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a2e0b04c65d86e55ae4d263bbe40c10f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57241f041000da52c7bdd70adbc90513"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a57241f041000da52c7bdd70adbc90513">is_remapped</a> () const</td></tr>
<tr class="memdesc:a57241f041000da52c7bdd70adbc90513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if data needs to be remapped.  <a href="#a57241f041000da52c7bdd70adbc90513">More...</a><br /></td></tr>
<tr class="separator:a57241f041000da52c7bdd70adbc90513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c45855ffa368f7c4d04d6479dca13c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a1c45855ffa368f7c4d04d6479dca13c0">set_num_extra</a> (int n__, int idx0__, <a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> *mp__)</td></tr>
<tr class="memdesc:a1c45855ffa368f7c4d04d6479dca13c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the dimensions of the extra matrix storage.  <a href="#a1c45855ffa368f7c4d04d6479dca13c0">More...</a><br /></td></tr>
<tr class="separator:a1c45855ffa368f7c4d04d6479dca13c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b7a8e175aa26df9609bff649211de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#ac9b7a8e175aa26df9609bff649211de0">remap_forward</a> (int n__, int idx0__, <a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> *mp__)</td></tr>
<tr class="memdesc:ac9b7a8e175aa26df9609bff649211de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remap data from prime to extra storage.  <a href="#ac9b7a8e175aa26df9609bff649211de0">More...</a><br /></td></tr>
<tr class="separator:ac9b7a8e175aa26df9609bff649211de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81960f6edbb58af547b87606f562df80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a81960f6edbb58af547b87606f562df80">remap_backward</a> (int n__, int idx0__)</td></tr>
<tr class="memdesc:a81960f6edbb58af547b87606f562df80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remap data from extra to prime storage.  <a href="#a81960f6edbb58af547b87606f562df80">More...</a><br /></td></tr>
<tr class="separator:a81960f6edbb58af547b87606f562df80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345ca6f9e5fad1658aab5c54c23de2f3"><td class="memItemLeft" align="right" valign="top"><a id="a345ca6f9e5fad1658aab5c54c23de2f3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remap_from</b> (<a class="el" href="../../dc/deb/classsddk_1_1dmatrix.html">dmatrix</a>&lt; T &gt; const &amp;mtrx__, int irow0__)</td></tr>
<tr class="separator:a345ca6f9e5fad1658aab5c54c23de2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49435aec43058ecae4a7437204f4e439"><td class="memItemLeft" align="right" valign="top"><a id="a49435aec43058ecae4a7437204f4e439"></a>
T &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> (int irow__, int jcol__)</td></tr>
<tr class="separator:a49435aec43058ecae4a7437204f4e439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ccc87d9674793d3c8203f9a57c58f31"><td class="memItemLeft" align="right" valign="top"><a id="a6ccc87d9674793d3c8203f9a57c58f31"></a>
T const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> (int irow__, int jcol__) const</td></tr>
<tr class="separator:a6ccc87d9674793d3c8203f9a57c58f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8091cf34ef4645a184eb494852adc35"><td class="memItemLeft" align="right" valign="top"><a id="ac8091cf34ef4645a184eb494852adc35"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> ()</td></tr>
<tr class="separator:ac8091cf34ef4645a184eb494852adc35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab435f519e1a509c564a14573d0b59684"><td class="memItemLeft" align="right" valign="top"><a id="ab435f519e1a509c564a14573d0b59684"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> () const</td></tr>
<tr class="separator:ab435f519e1a509c564a14573d0b59684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032653f0f1c2fac8d69934f7f18878c1"><td class="memItemLeft" align="right" valign="top"><a id="a032653f0f1c2fac8d69934f7f18878c1"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>extra</b> ()</td></tr>
<tr class="separator:a032653f0f1c2fac8d69934f7f18878c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81a62b6b760b4c4ac81a96b595ca8c4"><td class="memItemLeft" align="right" valign="top"><a id="af81a62b6b760b4c4ac81a96b595ca8c4"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>extra</b> () const</td></tr>
<tr class="separator:af81a62b6b760b4c4ac81a96b595ca8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="memItemLeft" align="right" valign="top"><a id="aa04f47a211e6957246c0c0f0a3ff78b3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aa04f47a211e6957246c0c0f0a3ff78b3">num_rows_loc</a> () const</td></tr>
<tr class="memdesc:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local number of rows in prime matrix. <br /></td></tr>
<tr class="separator:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c1f396ce131568d935e01755344fae2"><td class="memItemLeft" align="right" valign="top"><a id="a6c1f396ce131568d935e01755344fae2"></a>
<a class="el" href="../../d2/dc9/classsddk_1_1splindex.html">splindex</a>&lt; <a class="el" href="../../d6/d4d/namespacesddk.html#a0197232463248facb572e8a66177c260a0267ccb6d291f6853043de35b0b36368">block</a> &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>spl_num_col</b> () const</td></tr>
<tr class="separator:a6c1f396ce131568d935e01755344fae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe8debae42bc6f46f860d74124a328a0"><td class="memItemLeft" align="right" valign="top"><a id="afe8debae42bc6f46f860d74124a328a0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#afe8debae42bc6f46f860d74124a328a0">allocate</a> (<a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> &amp;mp__)</td></tr>
<tr class="memdesc:afe8debae42bc6f46f860d74124a328a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate prime storage. <br /></td></tr>
<tr class="separator:afe8debae42bc6f46f860d74124a328a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4471cc93d7d69b117f01d5198da313d"><td class="memItemLeft" align="right" valign="top"><a id="ab4471cc93d7d69b117f01d5198da313d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#ab4471cc93d7d69b117f01d5198da313d">allocate</a> (<a class="el" href="../../d6/d4d/namespacesddk.html#ad724f3c5b07010419730c654a1767283">memory_t</a> mem__)</td></tr>
<tr class="memdesc:ab4471cc93d7d69b117f01d5198da313d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate prime storage. <br /></td></tr>
<tr class="separator:ab4471cc93d7d69b117f01d5198da313d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3568c2340f75b2b670dcb0057f7b850b"><td class="memItemLeft" align="right" valign="top"><a id="a3568c2340f75b2b670dcb0057f7b850b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a3568c2340f75b2b670dcb0057f7b850b">deallocate</a> (<a class="el" href="../../d6/d4d/namespacesddk.html#ad724f3c5b07010419730c654a1767283">memory_t</a> mem__)</td></tr>
<tr class="memdesc:a3568c2340f75b2b670dcb0057f7b850b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate storage. <br /></td></tr>
<tr class="separator:a3568c2340f75b2b670dcb0057f7b850b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b70f31101e054d7240e8b97b5b0d42d"><td class="memItemLeft" align="right" valign="top"><a id="a9b70f31101e054d7240e8b97b5b0d42d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>scale</b> (<a class="el" href="../../d6/d4d/namespacesddk.html#ad724f3c5b07010419730c654a1767283">memory_t</a> mem__, int i0__, int n__, double beta__)</td></tr>
<tr class="separator:a9b70f31101e054d7240e8b97b5b0d42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab284484b9bc6d98f95f0299ca1c4ae45"><td class="memItemLeft" align="right" valign="top"><a id="ab284484b9bc6d98f95f0299ca1c4ae45"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>zero</b> (<a class="el" href="../../d6/d4d/namespacesddk.html#ad724f3c5b07010419730c654a1767283">memory_t</a> mem__, int i0__, int n__)</td></tr>
<tr class="separator:ab284484b9bc6d98f95f0299ca1c4ae45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329bead6e0e779ebec3e67655bf28a3f"><td class="memItemLeft" align="right" valign="top"><a id="a329bead6e0e779ebec3e67655bf28a3f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a329bead6e0e779ebec3e67655bf28a3f">copy_to</a> (<a class="el" href="../../d6/d4d/namespacesddk.html#ad724f3c5b07010419730c654a1767283">memory_t</a> mem__, int i0__, int n__)</td></tr>
<tr class="memdesc:a329bead6e0e779ebec3e67655bf28a3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy prime storage to device memory. <br /></td></tr>
<tr class="separator:a329bead6e0e779ebec3e67655bf28a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef6601d3f899c02bb1c42d34b273f42"><td class="memItemLeft" align="right" valign="top"><a id="a6ef6601d3f899c02bb1c42d34b273f42"></a>
double_complex&#160;</td><td class="memItemRight" valign="bottom"><b>checksum</b> (<a class="el" href="../../d6/d4d/namespacesddk.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a> pu__, int i0__, int n__)</td></tr>
<tr class="separator:a6ef6601d3f899c02bb1c42d34b273f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1d3e5dd4364d5f952d8f4347f9a4ff5c"><td class="memItemLeft" align="right" valign="top"><a id="a1d3e5dd4364d5f952d8f4347f9a4ff5c"></a>
<a class="el" href="../../d7/def/classsddk_1_1_gvec__partition.html">Gvec_partition</a> const  *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a1d3e5dd4364d5f952d8f4347f9a4ff5c">gvp_</a> {nullptr}</td></tr>
<tr class="memdesc:a1d3e5dd4364d5f952d8f4347f9a4ff5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">G-vector partitioning. <br /></td></tr>
<tr class="separator:a1d3e5dd4364d5f952d8f4347f9a4ff5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed403722d47dae87a9a721b94c8a3ead"><td class="memItemLeft" align="right" valign="top"><a id="aed403722d47dae87a9a721b94c8a3ead"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aed403722d47dae87a9a721b94c8a3ead">num_rows_loc_</a> {0}</td></tr>
<tr class="memdesc:aed403722d47dae87a9a721b94c8a3ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local number of rows. <br /></td></tr>
<tr class="separator:aed403722d47dae87a9a721b94c8a3ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea07eddfd0f46bb0649933617389a2d1"><td class="memItemLeft" align="right" valign="top"><a id="aea07eddfd0f46bb0649933617389a2d1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aea07eddfd0f46bb0649933617389a2d1">num_cols_</a></td></tr>
<tr class="memdesc:aea07eddfd0f46bb0649933617389a2d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of columns. <br /></td></tr>
<tr class="separator:aea07eddfd0f46bb0649933617389a2d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fd50a540cca9842230ae29ba05b8bc"><td class="memItemLeft" align="right" valign="top"><a id="a36fd50a540cca9842230ae29ba05b8bc"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a36fd50a540cca9842230ae29ba05b8bc">prime_</a></td></tr>
<tr class="memdesc:a36fd50a540cca9842230ae29ba05b8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Primary storage of matrix. <br /></td></tr>
<tr class="separator:a36fd50a540cca9842230ae29ba05b8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf951b4fd1c7be54bbb5e01876db40b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#abf951b4fd1c7be54bbb5e01876db40b5">extra_</a></td></tr>
<tr class="memdesc:abf951b4fd1c7be54bbb5e01876db40b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary matrix storage.  <a href="#abf951b4fd1c7be54bbb5e01876db40b5">More...</a><br /></td></tr>
<tr class="separator:abf951b4fd1c7be54bbb5e01876db40b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3cc19ad8eb86b00642e4a72d355176"><td class="memItemLeft" align="right" valign="top"><a id="afe3cc19ad8eb86b00642e4a72d355176"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#afe3cc19ad8eb86b00642e4a72d355176">extra_buf_</a></td></tr>
<tr class="memdesc:afe3cc19ad8eb86b00642e4a72d355176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw buffer for the extra storage. <br /></td></tr>
<tr class="separator:afe3cc19ad8eb86b00642e4a72d355176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9437d5b26bc924ac2d002eb490c5fad8"><td class="memItemLeft" align="right" valign="top"><a id="a9437d5b26bc924ac2d002eb490c5fad8"></a>
<a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt; T, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a9437d5b26bc924ac2d002eb490c5fad8">send_recv_buf_</a></td></tr>
<tr class="memdesc:a9437d5b26bc924ac2d002eb490c5fad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw send-recieve buffer. <br /></td></tr>
<tr class="separator:a9437d5b26bc924ac2d002eb490c5fad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb07402371c615777ed73f1d0811e00"><td class="memItemLeft" align="right" valign="top"><a id="abcb07402371c615777ed73f1d0811e00"></a>
<a class="el" href="../../d2/dc9/classsddk_1_1splindex.html">splindex</a>&lt; <a class="el" href="../../d6/d4d/namespacesddk.html#a0197232463248facb572e8a66177c260a0267ccb6d291f6853043de35b0b36368">block</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/db3/classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#abcb07402371c615777ed73f1d0811e00">spl_num_col_</a></td></tr>
<tr class="memdesc:abcb07402371c615777ed73f1d0811e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Column distribution in auxiliary matrix. <br /></td></tr>
<tr class="separator:abcb07402371c615777ed73f1d0811e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt;</h3>

<p>Specialization of matrix storage class for slab data distribution. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>data type </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00052">52</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a57241f041000da52c7bdd70adbc90513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57241f041000da52c7bdd70adbc90513">&#9670;&nbsp;</a></span>is_remapped()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d7/dbe/classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::is_remapped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if data needs to be remapped. </p>
<p>Data is not remapped when communicator that is orthogonal to FFT communicator is trivial. In this case the FFT communicator coincides with the entire communicator used to distribute wave functions and the data is ready for FFT transformations. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00117">117</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<a id="a1c45855ffa368f7c4d04d6479dca13c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c45855ffa368f7c4d04d6479dca13c0">&#9670;&nbsp;</a></span>set_num_extra()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d7/dbe/classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::set_num_extra </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> *&#160;</td>
          <td class="paramname"><em>mp__</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the dimensions of the extra matrix storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to distribute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>Memory pool that can be used for fast reallocation.</td></tr>
  </table>
  </dd>
</dl>
<div class="image">
<img src="../../matrix_storage.png" alt="matrix_storage.png"/>
<div class="caption">
Redistribution of wave-functions between MPI ranks</div></div>
<p> The extra storage is always created in the CPU memory. If the data distribution doesn't change (no swapping between comm_col ranks is performed) – then the extra storage will mirror the prime storage (both on CPU and GPU) irrespective of the target processing unit. If data remapping is necessary extra storage is allocated only in the host memory because MPI is done using the host pointers. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00135">135</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<a id="ac9b7a8e175aa26df9609bff649211de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b7a8e175aa26df9609bff649211de0">&#9670;&nbsp;</a></span>remap_forward()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d7/dbe/classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::remap_forward </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/dc8/classsddk_1_1memory__pool.html">memory_pool</a> *&#160;</td>
          <td class="paramname"><em>mp__</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remap data from prime to extra storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to distribute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix.</td></tr>
  </table>
  </dd>
</dl>
<p>Prime storage is expected on the CPU (for the MPI a2a communication). </p>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00183">183</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<a id="a81960f6edbb58af547b87606f562df80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81960f6edbb58af547b87606f562df80">&#9670;&nbsp;</a></span>remap_backward()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d7/dbe/classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::remap_backward </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remap data from extra to prime storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to collect. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix.</td></tr>
  </table>
  </dd>
</dl>
<p>Extra storage is expected on the CPU (for the MPI a2a communication). If the prime storage is allocated on GPU remapped data will be copied to GPU. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00236">236</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abf951b4fd1c7be54bbb5e01876db40b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf951b4fd1c7be54bbb5e01876db40b5">&#9670;&nbsp;</a></span>extra_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dab/classsddk_1_1mdarray.html">mdarray</a>&lt;T, 2&gt; <a class="el" href="../../d7/dbe/classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::extra_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Auxiliary matrix storage. </p>
<p>This distribution is used by the FFT driver </p>

<p class="definition">Definition at line <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html#l00070">70</a> of file <a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../db/d11/matrix__storage_8hpp_source.html">matrix_storage.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 29 2019 11:36:36 for SIRIUS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
