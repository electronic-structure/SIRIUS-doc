<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIRIUS: sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SIRIUS
   &#160;<span id="projectnumber">4.7</span>
   </div>
   <div id="projectbrief">Electronic structure library and applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>sddk</b></li><li class="navelem"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html">matrix_storage&lt; T, matrix_storage_t::slab &gt;</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Specialization of matrix storage class for slab data distribution.  
 <a href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4__coll__graph.svg" width="100%" height="460"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2284a5a9eb0232b6a173a24281ca9dcc"><td class="memItemLeft" align="right" valign="top"><a id="a2284a5a9eb0232b6a173a24281ca9dcc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a2284a5a9eb0232b6a173a24281ca9dcc">matrix_storage</a> (int num_rows_loc__, int num_cols__, <a class="el" href="classsddk_1_1_communicator.html">Communicator</a> const &amp;comm_col__)</td></tr>
<tr class="memdesc:a2284a5a9eb0232b6a173a24281ca9dcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a2284a5a9eb0232b6a173a24281ca9dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73b0eaeca2421c8543f691bb855a413"><td class="memItemLeft" align="right" valign="top"><a id="af73b0eaeca2421c8543f691bb855a413"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#af73b0eaeca2421c8543f691bb855a413">matrix_storage</a> (T *ptr__, int num_rows_loc__, int num_cols__, <a class="el" href="classsddk_1_1_communicator.html">Communicator</a> const &amp;comm_col__)</td></tr>
<tr class="memdesc:af73b0eaeca2421c8543f691bb855a413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:af73b0eaeca2421c8543f691bb855a413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57241f041000da52c7bdd70adbc90513"><td class="memItemLeft" align="right" valign="top"><a id="a57241f041000da52c7bdd70adbc90513"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a57241f041000da52c7bdd70adbc90513">is_remapped</a> () const</td></tr>
<tr class="memdesc:a57241f041000da52c7bdd70adbc90513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if data needs to be remapped. This happens when comm_col is not trivial communicator. <br /></td></tr>
<tr class="separator:a57241f041000da52c7bdd70adbc90513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3435a35286f4c0d8b7dffcf787d18dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#af3435a35286f4c0d8b7dffcf787d18dc">set_num_extra</a> (<a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a> pu__, int num_rows__, int n__, int idx0__=0)</td></tr>
<tr class="memdesc:af3435a35286f4c0d8b7dffcf787d18dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the dimensions of the extra matrix storage.  <a href="#af3435a35286f4c0d8b7dffcf787d18dc">More...</a><br /></td></tr>
<tr class="separator:af3435a35286f4c0d8b7dffcf787d18dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4be8261bbba8fe2b609878cfa78505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a5b4be8261bbba8fe2b609878cfa78505">remap_forward</a> (<a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a> pu__, <a class="el" href="structsddk_1_1block__data__descriptor.html">block_data_descriptor</a> const &amp;row_distr__, int n__, int idx0__=0)</td></tr>
<tr class="memdesc:a5b4be8261bbba8fe2b609878cfa78505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remap data from prime to extra storage.  <a href="#a5b4be8261bbba8fe2b609878cfa78505">More...</a><br /></td></tr>
<tr class="separator:a5b4be8261bbba8fe2b609878cfa78505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab57103b0df4c60c00c52df334fb21c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aab57103b0df4c60c00c52df334fb21c7">remap_backward</a> (<a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a> pu__, <a class="el" href="structsddk_1_1block__data__descriptor.html">block_data_descriptor</a> const &amp;row_distr__, int n__, int idx0__=0)</td></tr>
<tr class="memdesc:aab57103b0df4c60c00c52df334fb21c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remap data from extra to prime storage.  <a href="#aab57103b0df4c60c00c52df334fb21c7">More...</a><br /></td></tr>
<tr class="separator:aab57103b0df4c60c00c52df334fb21c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345ca6f9e5fad1658aab5c54c23de2f3"><td class="memItemLeft" align="right" valign="top"><a id="a345ca6f9e5fad1658aab5c54c23de2f3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>remap_from</b> (<a class="el" href="classsddk_1_1dmatrix.html">dmatrix</a>&lt; T &gt; const &amp;mtrx__, int irow0__)</td></tr>
<tr class="separator:a345ca6f9e5fad1658aab5c54c23de2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49435aec43058ecae4a7437204f4e439"><td class="memItemLeft" align="right" valign="top"><a id="a49435aec43058ecae4a7437204f4e439"></a>
T &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> (int irow__, int jcol__)</td></tr>
<tr class="separator:a49435aec43058ecae4a7437204f4e439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ccc87d9674793d3c8203f9a57c58f31"><td class="memItemLeft" align="right" valign="top"><a id="a6ccc87d9674793d3c8203f9a57c58f31"></a>
T const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> (int irow__, int jcol__) const</td></tr>
<tr class="separator:a6ccc87d9674793d3c8203f9a57c58f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8091cf34ef4645a184eb494852adc35"><td class="memItemLeft" align="right" valign="top"><a id="ac8091cf34ef4645a184eb494852adc35"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> ()</td></tr>
<tr class="separator:ac8091cf34ef4645a184eb494852adc35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab435f519e1a509c564a14573d0b59684"><td class="memItemLeft" align="right" valign="top"><a id="ab435f519e1a509c564a14573d0b59684"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>prime</b> () const</td></tr>
<tr class="separator:ab435f519e1a509c564a14573d0b59684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032653f0f1c2fac8d69934f7f18878c1"><td class="memItemLeft" align="right" valign="top"><a id="a032653f0f1c2fac8d69934f7f18878c1"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>extra</b> ()</td></tr>
<tr class="separator:a032653f0f1c2fac8d69934f7f18878c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81a62b6b760b4c4ac81a96b595ca8c4"><td class="memItemLeft" align="right" valign="top"><a id="af81a62b6b760b4c4ac81a96b595ca8c4"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>extra</b> () const</td></tr>
<tr class="separator:af81a62b6b760b4c4ac81a96b595ca8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4e2862c8ee2e7eb1806cab12e04cf6"><td class="memTemplParams" colspan="2"><a id="a4c4e2862c8ee2e7eb1806cab12e04cf6"></a>
template&lt;memory_t mem_type&gt; </td></tr>
<tr class="memitem:a4c4e2862c8ee2e7eb1806cab12e04cf6"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>zero</b> (int i0__, int n__)</td></tr>
<tr class="separator:a4c4e2862c8ee2e7eb1806cab12e04cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="memItemLeft" align="right" valign="top"><a id="aa04f47a211e6957246c0c0f0a3ff78b3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aa04f47a211e6957246c0c0f0a3ff78b3">num_rows_loc</a> () const</td></tr>
<tr class="memdesc:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local number of rows in prime matrix. <br /></td></tr>
<tr class="separator:aa04f47a211e6957246c0c0f0a3ff78b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c1f396ce131568d935e01755344fae2"><td class="memItemLeft" align="right" valign="top"><a id="a6c1f396ce131568d935e01755344fae2"></a>
<a class="el" href="classsddk_1_1splindex.html">splindex</a>&lt; block &gt; const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>spl_num_col</b> () const</td></tr>
<tr class="separator:a6c1f396ce131568d935e01755344fae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff411a242bc539feafcfe671ddeb48be"><td class="memItemLeft" align="right" valign="top"><a id="aff411a242bc539feafcfe671ddeb48be"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aff411a242bc539feafcfe671ddeb48be">allocate_on_device</a> ()</td></tr>
<tr class="memdesc:aff411a242bc539feafcfe671ddeb48be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate prime storage on device. <br /></td></tr>
<tr class="separator:aff411a242bc539feafcfe671ddeb48be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58002f75caaf549cb71abb2781a24dd6"><td class="memItemLeft" align="right" valign="top"><a id="a58002f75caaf549cb71abb2781a24dd6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a58002f75caaf549cb71abb2781a24dd6">deallocate_on_device</a> ()</td></tr>
<tr class="memdesc:a58002f75caaf549cb71abb2781a24dd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate storage on device. <br /></td></tr>
<tr class="separator:a58002f75caaf549cb71abb2781a24dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b9780965976605138101bd29cc9eeb"><td class="memItemLeft" align="right" valign="top"><a id="ab0b9780965976605138101bd29cc9eeb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#ab0b9780965976605138101bd29cc9eeb">copy_to_device</a> (int i0__, int n__)</td></tr>
<tr class="memdesc:ab0b9780965976605138101bd29cc9eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy prime storage to device memory. <br /></td></tr>
<tr class="separator:ab0b9780965976605138101bd29cc9eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88e4399b66de4dfbf522dc96cd53136"><td class="memItemLeft" align="right" valign="top"><a id="ad88e4399b66de4dfbf522dc96cd53136"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#ad88e4399b66de4dfbf522dc96cd53136">copy_to_host</a> (int i0__, int n__)</td></tr>
<tr class="memdesc:ad88e4399b66de4dfbf522dc96cd53136"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy prime storage to host memory. <br /></td></tr>
<tr class="separator:ad88e4399b66de4dfbf522dc96cd53136"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aed403722d47dae87a9a721b94c8a3ead"><td class="memItemLeft" align="right" valign="top"><a id="aed403722d47dae87a9a721b94c8a3ead"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aed403722d47dae87a9a721b94c8a3ead">num_rows_loc_</a> {0}</td></tr>
<tr class="memdesc:aed403722d47dae87a9a721b94c8a3ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local number of rows. <br /></td></tr>
<tr class="separator:aed403722d47dae87a9a721b94c8a3ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea07eddfd0f46bb0649933617389a2d1"><td class="memItemLeft" align="right" valign="top"><a id="aea07eddfd0f46bb0649933617389a2d1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#aea07eddfd0f46bb0649933617389a2d1">num_cols_</a></td></tr>
<tr class="memdesc:aea07eddfd0f46bb0649933617389a2d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of columns. <br /></td></tr>
<tr class="separator:aea07eddfd0f46bb0649933617389a2d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f05129f92a39e45d4068e6fe5442b90"><td class="memItemLeft" align="right" valign="top"><a id="a2f05129f92a39e45d4068e6fe5442b90"></a>
<a class="el" href="classsddk_1_1_communicator.html">Communicator</a> const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a2f05129f92a39e45d4068e6fe5442b90">comm_col_</a></td></tr>
<tr class="memdesc:a2f05129f92a39e45d4068e6fe5442b90"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classsddk_1_1_communicator.html" title="MPI communicator wrapper. ">Communicator</a> for column distribution in extra storage. <br /></td></tr>
<tr class="separator:a2f05129f92a39e45d4068e6fe5442b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fd50a540cca9842230ae29ba05b8bc"><td class="memItemLeft" align="right" valign="top"><a id="a36fd50a540cca9842230ae29ba05b8bc"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a36fd50a540cca9842230ae29ba05b8bc">prime_</a></td></tr>
<tr class="memdesc:a36fd50a540cca9842230ae29ba05b8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Primary storage of matrix. <br /></td></tr>
<tr class="separator:a36fd50a540cca9842230ae29ba05b8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf951b4fd1c7be54bbb5e01876db40b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#abf951b4fd1c7be54bbb5e01876db40b5">extra_</a></td></tr>
<tr class="memdesc:abf951b4fd1c7be54bbb5e01876db40b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary matrix storage.  <a href="#abf951b4fd1c7be54bbb5e01876db40b5">More...</a><br /></td></tr>
<tr class="separator:abf951b4fd1c7be54bbb5e01876db40b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3cc19ad8eb86b00642e4a72d355176"><td class="memItemLeft" align="right" valign="top"><a id="afe3cc19ad8eb86b00642e4a72d355176"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#afe3cc19ad8eb86b00642e4a72d355176">extra_buf_</a></td></tr>
<tr class="memdesc:afe3cc19ad8eb86b00642e4a72d355176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw buffer for the extra storage. <br /></td></tr>
<tr class="separator:afe3cc19ad8eb86b00642e4a72d355176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9437d5b26bc924ac2d002eb490c5fad8"><td class="memItemLeft" align="right" valign="top"><a id="a9437d5b26bc924ac2d002eb490c5fad8"></a>
<a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt; T, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#a9437d5b26bc924ac2d002eb490c5fad8">send_recv_buf_</a></td></tr>
<tr class="memdesc:a9437d5b26bc924ac2d002eb490c5fad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw send-recieve buffer. <br /></td></tr>
<tr class="separator:a9437d5b26bc924ac2d002eb490c5fad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb07402371c615777ed73f1d0811e00"><td class="memItemLeft" align="right" valign="top"><a id="abcb07402371c615777ed73f1d0811e00"></a>
<a class="el" href="classsddk_1_1splindex.html">splindex</a>&lt; block &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsddk_1_1matrix__storage_3_01_t_00_01matrix__storage__t_1_1slab_01_4.html#abcb07402371c615777ed73f1d0811e00">spl_num_col_</a></td></tr>
<tr class="memdesc:abcb07402371c615777ed73f1d0811e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Column distribution in auxiliary matrix. <br /></td></tr>
<tr class="separator:abcb07402371c615777ed73f1d0811e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class sddk::matrix_storage&lt; T, matrix_storage_t::slab &gt;</h3>

<p>Specialization of matrix storage class for slab data distribution. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>data type </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="matrix__storage_8hpp_source.html#l00043">43</a> of file <a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af3435a35286f4c0d8b7dffcf787d18dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3435a35286f4c0d8b7dffcf787d18dc">&#9670;&nbsp;</a></span>set_num_extra()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::set_num_extra </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a>&#160;</td>
          <td class="paramname"><em>pu__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_rows__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the dimensions of the extra matrix storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pu</td><td>Target processing unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_rows</td><td>Local number of rows in the extra matrix storage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to distribute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix.</td></tr>
  </table>
  </dd>
</dl>
<div class="image">
<img src="matrix_storage.png" alt="matrix_storage.png"/>
<div class="caption">
Redistribution of wave-functions between MPI ranks</div></div>
<p> The extra storage is always created in the CPU memory. If the data distribution doesn't change (no swapping between comm_col ranks is performed) – then the extra storage will mirror the prime storage (both on CPU and GPU) irrespective of the target processing unit. If data remapping is necessary and target processing unit is GPU then the extra storage will be allocated on the GPU as well. </p>

<p class="definition">Definition at line <a class="el" href="matrix__storage_8hpp_source.html#l00114">114</a> of file <a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<a id="a5b4be8261bbba8fe2b609878cfa78505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4be8261bbba8fe2b609878cfa78505">&#9670;&nbsp;</a></span>remap_forward()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::remap_forward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a>&#160;</td>
          <td class="paramname"><em>pu__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsddk_1_1block__data__descriptor.html">block_data_descriptor</a> const &amp;&#160;</td>
          <td class="paramname"><em>row_distr__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remap data from prime to extra storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pu</td><td>Target processing unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">row_distr</td><td>Distribution of rows of prime matrix in the extra matrix storage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to distribute. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix.</td></tr>
  </table>
  </dd>
</dl>
<p>Prime storage is expected on the CPU (for the MPI a2a communication). If the target processing unit is GPU extra storage will be copied to the device memory. </p>

<p class="definition">Definition at line <a class="el" href="matrix__storage_8hpp_source.html#l00171">171</a> of file <a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<a id="aab57103b0df4c60c00c52df334fb21c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab57103b0df4c60c00c52df334fb21c7">&#9670;&nbsp;</a></span>remap_backward()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::remap_backward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdarray_8hpp.html#a8ec5c207c724e5271f35f5ccb8f4abb6">device_t</a>&#160;</td>
          <td class="paramname"><em>pu__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsddk_1_1block__data__descriptor.html">block_data_descriptor</a> const &amp;&#160;</td>
          <td class="paramname"><em>row_distr__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n__</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx0__</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remap data from extra to prime storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pu</td><td>Target processing unit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">row_distr</td><td>Distribution of rows of prime matrix in the extra matrix storage. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of matrix columns to collect. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx0</td><td>Starting column of the matrix.</td></tr>
  </table>
  </dd>
</dl>
<p>Extra storage is expected on the CPU (for the MPI a2a communication). If the target processing unit is GPU prime storage will be copied to the device memory. </p>

<p class="definition">Definition at line <a class="el" href="matrix__storage_8hpp_source.html#l00229">229</a> of file <a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abf951b4fd1c7be54bbb5e01876db40b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf951b4fd1c7be54bbb5e01876db40b5">&#9670;&nbsp;</a></span>extra_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsddk_1_1mdarray.html">mdarray</a>&lt;T, 2&gt; <a class="el" href="classsddk_1_1matrix__storage.html">sddk::matrix_storage</a>&lt; T, matrix_storage_t::slab &gt;::extra_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Auxiliary matrix storage. </p>
<p>This distribution is used by the FFT driver </p>

<p class="definition">Definition at line <a class="el" href="matrix__storage_8hpp_source.html#l00060">60</a> of file <a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="matrix__storage_8hpp_source.html">matrix_storage.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 20 2017 10:18:55 for SIRIUS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
